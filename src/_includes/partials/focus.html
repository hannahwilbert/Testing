<style>
  @keyframes glow-burst {
    0% {
      box-shadow: 0 0 0 0 rgba(13, 148, 136, 0.8);
    }
    70% {
      box-shadow: 0 0 0 10px rgba(13, 148, 136, 0.1);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(13, 148, 136, 0);
    }
  }
  .animate-glow-burst {
    animation: glow-burst 1.8s ease-out infinite;
  }
</style>

<div 
  x-data="{
    visible: false,
    expanded: false,
    testMode: true, // Set to false in production
    init() {
      if (this.testMode) {
        this.visible = true;
        this.expanded = false;
        setTimeout(() => { this.expanded = true }, 4000);
      } else {
        setTimeout(() => {
          this.visible = true;
          setTimeout(() => { this.expanded = true }, 4000);
        }, 5000);
      }
    },
    toggle() {
      this.expanded = !this.expanded;
    },
    go() {
      if (this.expanded) window.location.href = '/alldeskai/';
    }
  }"
  x-init
  x-cloak
  class="fixed z-50 bottom-6 right-6"
>

  <template x-if="visible">
    <div class="relative group" @click.away="expanded = false">

      <!-- Main Button -->
      <button 
        @click="expanded ? go() : toggle()"
        class="flex items-center font-semibold text-white transition-all ease-in-out bg-teal-500 shadow-xl cursor-pointer duration-400 hover:bg-teal-600 focus:outline-none animate-glow-burst"
        :class="expanded ? 'px-5 py-4 rounded-full space-x-3 w-auto' : 'p-4 rounded-full w-14 h-14 justify-center'"
        aria-label="Explore AllDesk Ai"
      >
        <!-- Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sparkles-icon lucide-sparkles">
          <path d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"/>
          <path d="M20 3v4"/><path d="M22 5h-4"/><path d="M4 17v2"/><path d="M5 18H3"/>
        </svg>

        <!-- Text Label -->
        <span 
          x-show="expanded"
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 scale-0"
          x-transition:enter-end="opacity-100 scale-100"
          x-transition:leave="opacity-0 duration"
          x-transition:leave-start="opacity-0 scale-0"
          x-transition:leave-end="opacity-0 scale-0"
          x-cloak
          class="ml-2 whitespace-nowrap"
        >Learn about AllDesk Ai</span>
      </button>

      <!-- Dismiss button -->
      <button 
        @click="expanded = false"
        x-show="expanded"
        x-transition
        class="absolute p-1 bg-transparent rounded-full shadow-md cursor-pointer text-slate-400 -top-2 -right-2 hover:text-red-500"
        aria-label="Collapse Button"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>

    </div>
  </template>

</div>
