{% extends "layouts/base.html" %}

{% block content %}

{# Hero Section #}
<section style="background:#020617;" class="product-hero relative w-full px-6 pt-36 pb-20 text-white overflow-hidden md:px-10 md:pt-40">
  <div class="waves absolute inset-0 pointer-events-none"></div>
  <div class="absolute inset-0 bg-gradient-to-br from-black via-slate-950/85 to-slate-900/65"></div>
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(45,212,191,0.12),_transparent_60%)]"></div>
  <div class="relative">
    <div class="relative z-10 grid max-w-screen-xl gap-12 px-0 mx-auto items-center md:grid-cols-[minmax(0,7fr)_minmax(0,5fr)]">
      <div class="max-w-3xl">
        {% if heroEyebrow %}
        <span class="inline-flex items-center gap-2 px-3 py-1 mb-6 text-xs font-semibold tracking-[0.28em] uppercase rounded-full border border-white/20 bg-white/5 text-teal-200/90">{{ heroEyebrow }}</span>
        {% endif %}
        <h1 class="heading-xl mb-6">{{ mainTitle | safe }}</h1>
        <p class="body-lead">{{ subtitle }}</p>
        {% if heroDescription %}
        <p class="body-lead mt-sm">{{ heroDescription }}</p>
        {% endif %}
        {% if frameworkSteps %}
        {% set heroStageLabels = ['Stabilize', 'Optimize', 'Transform'] %}
        <div class="flex flex-wrap items-center gap-2 mt-10">
          {% for step in frameworkSteps %}
          {% set stageLabel = heroStageLabels[loop.index0] or step.phase %}
          <span class="heroStagePill px-4 py-1 text-xs font-semibold tracking-[0.28em] uppercase border rounded-full border-white/20 bg-white/5">{{ stageLabel }}</span>
          {% endfor %}
        </div>
        {% endif %}
        {% if heroCtaLink and heroCtaText %}
        <a href="{{ heroCtaLink }}" data-cta="primary" class="mt-12">
          {{ heroCtaText }}
          <img src="/images/icons/ArrowUpRightWhite.svg" alt="{{ heroCtaText }}">
        </a>
        {% endif %}
      </div>
      {% if heroAnimation %}
        {% include "partials/hero-animations/" + heroAnimation + ".html" %}
      {% elseif heroImage %}
        <figure class="relative flex flex-col items-center gap-3 text-center">
          <img src="{{ heroImage }}" alt="{{ heroImageAlt }}" class="relative w-full max-w-md h-auto object-contain">
          {% if product != 'Cyber Security' %}
          <figcaption class="text-xs tracking-[0.24em] uppercase text-slate-300/70">[placeholder image]</figcaption>
          {% endif %}
        </figure>
      {% endif %}
    </div>
  </div>
</section>

<style>
  .waves canvas{
    width:100%;
    height:100%;
    display:block;
  }
  .heroStagePill{
    position:relative;
    color:transparent;
    background-image:linear-gradient(120deg,#3ba59c 0%,#2b7da8 42%,#68a8d8 72%,#b4b0df 100%);
    -webkit-background-clip:text;
    background-clip:text;
    -webkit-text-fill-color:transparent;
    text-transform:uppercase;
    letter-spacing:0.28em;
    font-weight:700;
  }

  .heroStagePill::before{
    content:"";
    position:absolute;
    inset:0;
    border-radius:inherit;
    background:rgba(255,255,255,0.08);
    z-index:-1;
  }
</style>

<!-- Solutions pages: slightly smaller heading scale than home -->
<style>
  :root{
    --heading-xl: clamp(28px, 5.6vw, 52px);
    --heading-lg: clamp(22px, 4.6vw, 38px);
    --heading-md: clamp(18px, 3.8vw, 28px);
  }
</style>

<!-- Cyber page CTA color match to Home (solid brand) -->
<style>
  /* Make all primary CTAs on this page use solid brand teal like Home */
  main a[data-cta="primary"]{ background: var(--brand); }
  /* Preserve hover effects without changing color */
  main a[data-cta="primary"]:is(:hover,:focus-visible){ filter:brightness(1.03); }
  /* Ensure CTA arrow remains visible */
  main a[data-cta="primary"] img{ height:18px; }
  /* If a mid-CTA variant adds extra classes, this still applies */
  .midCtaButton{ background: var(--brand); }
  .midCtaButton:is(:hover,:focus-visible){ filter:brightness(1.03); }
  /* Challenges CTA button inside this page */
  .securityPressures__cta.securityPressures__cta--primary{ background: var(--brand); }
  .securityPressures__cta.securityPressures__cta--primary:is(:hover,:focus-visible){ filter:brightness(1.03); }
</style>

<style>
  :root{
    /* Match home wrapper width and comfortable padding */
    --page-max: min(1360px, 96vw);
    --page-pad: clamp(16px, 3vw, 24px);
    /* Match home section vertical rhythm */
    --section-pad-block: clamp(140px, 18vh, 240px);
    --section-pad-tight: clamp(100px, 14vh, 180px);
  }

  .product-shell{
    width:100%;
    max-width:var(--page-max);
    margin:0 auto;
    padding:0 var(--page-pad);
  }

  .section-shell{
    width:100%;
    max-width:var(--page-max);
    margin:0 auto;
    padding:0 var(--page-pad);
  }
  /* Section title width: about 60% of content (desktop) */
  .product-shell .max-w-3xl{ max-width:60% !important; width:100%; }
  /* Services section title wrapper */
  .cyberServices__head{ max-width:60% !important; width:100%; }
  /* On small screens, let titles span full width for readability */
  @media (max-width: 720px){
    .product-shell .max-w-3xl,
    .cyberServices__head{ max-width:none !important; width:100%; }
  }
  /* Section titles: fixed 38px Inter */
  .product-shell .heading-xl{ font-family:"Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif !important; font-size:38px !important; line-height:1.2; letter-spacing:-.01em; }
  /* Also apply to the Cyber Pressures title included from partial */
  [data-security-pressures] .securityPressures__title{ font-family:"Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif !important; font-size:38px !important; line-height:1.2; letter-spacing:-.01em; }
  /* Teal accent for Elevate word in approach title */
  .howTitleTeal{ color: var(--brand); }
  /* Hero subhead under the main title */
  .product-hero .body-lead{ font-size:clamp(17px, 2.6vw, 22px); line-height:1.65; }
</style>

<main style="background:transparent; background-repeat:no-repeat; background-size:100% 100%; min-height:100vh;">
  

  {% if challenges %}
  {% set pressuresVariant = 'network' %}
  {% if product == 'Cyber Security' %}
    {% set pressuresVariant = 'cyber' %}
  {% endif %}
  {% if challengesVariant %}
    {% set pressuresVariant = challengesVariant %}
  {% endif %}
  {% set pressuresSecondaryLink = challengesSecondaryCtaLink or '/your-challenges/cybersecurity/' %}
  {% set pressuresSecondaryText = challengesSecondaryCtaText or 'Explore Security Challenges' %}
  {% set pressuresColumns = challengesColumns or 3 %}
  {% if pressuresVariant == 'cyber' %}
    {% include "partials/challenges-cyber.html" %}
  {% else %}
    {% include "partials/challenges-network.html" %}
  {% endif %}
  {% endif %}

  <article class="product-shell space-y-0">

    {% if frameworkSteps %}
    <section class="frameworkJourney">
      <div class="frameworkJourney__wrap">
        <div class="max-w-3xl space-y-4">
          <h2 class="frameworkJourney__title heading-xl">{{ 'Our Approach Through Elevate' | replace('Approach Through', '<span class="howTitleTeal">Approach Through</span>') | replace('Elevate', '<span class="howTitleTeal">Elevate</span>') | safe }}</h2>
        </div>

        <div class="howE__grid" role="list">
          {% for step in frameworkSteps %}
          {% set overlayId = 'elevate-overlay-product-' ~ loop.index %}
          {% set img = '/images/elevate/stabilize.png' %}
          {% set tag = 'Fix urgent gaps, secure the foundation.' %}
          {% if step.phase and step.phase | lower == 'optimize' %}
            {% set img = '/images/elevate/optimize.png' %}
            {% set tag = 'Improve performance, reduce risks, automate.' %}
          {% elseif step.phase and step.phase | lower == 'transform' %}
            {% set img = '/images/elevate/transform.png' %}
            {% set tag = 'Align IT strategy with business growth.' %}
          {% endif %}

          <article x-data="{ open:false }" class="howE__card overflow-hidden rounded-4xl flex flex-col" :class="open ? 'howE__card--open' : ''" role="listitem">
            <div class="transition-colors rounded-t-4xl flex-1" :class="open ? 'bg-teal-500 text-neutral-900' : 'bg-neutral-800 text-neutral-100'">
              <div class="px-6 pt-6">
                <div class="flex items-center justify-between">
                  <div class="flex gap-3">
                    <span class="px-3 py-1 text-xs rounded-full" :class="open ? 'bg-teal-600 text-neutral-900' : 'bg-neutral-600 text-neutral-100'">
                      Stage {{ loop.index }}
                    </span>
                  </div>
                  <img src="/images/icons/elevateArrorwRound.svg" alt="" class="w-8 h-8" x-show="!open">
                  <img src="/images/icons/elevateArrorwRoundBlack.svg" alt="" class="w-8 h-8" x-show="open">
                </div>
              </div>

              <div class="px-4 sm:px-6 pb-4 sm:pb-6 mt-8 sm:mt-12 space-y-2">
                <h3 class="text-2xl sm:text-3xl lg:text-4xl xl:text-5xl font-semibold tracking-tighter">{{ step.phase }}</h3>
                <p class="text-base sm:text-lg font-extralight leading-snug">{{ tag }}</p>
              </div>
            </div>

            <div class="relative">
              <button
                type="button"
                class="block w-full h-48 sm:h-56 md:h-64 lg:h-72 rounded-b-2xl sm:rounded-b-3xl md:rounded-b-4xl overflow-hidden cursor-pointer motion-safe:transition-transform motion-safe:duration-500 motion-safe:ease-out"
                :aria-expanded="open.toString()"
                :aria-controls="'{{ overlayId }}'"
                :aria-label="(open ? 'Hide' : 'Show') + ' details for {{ step.phase | safe }}'"
                @click="open = !open"
                @keydown.enter.prevent="open = !open"
                @keydown.space.prevent="open = !open"
                @keydown.escape.prevent="open = false"
              >
                <img src="{{ img }}" alt="{{ step.phase }} image" class="w-full h-full object-cover">
              </button>

              <div
                class="absolute inset-0 flex items-center justify-center p-3 sm:p-4 pointer-events-none motion-safe:transition-transform motion-safe:duration-500 motion-safe:ease-out"
                :class="open ? 'translate-y-0' : 'translate-y-full'"
                :aria-hidden="(!open).toString()"
                :id="'{{ overlayId }}'"
              >
                <div class="w-full max-w-xs sm:max-w-sm p-4 sm:p-6 bg-black/90 rounded-xl sm:rounded-2xl backdrop-blur-sm">
                  {% if step.description %}
                  <p class="text-sm sm:text-lg font-light text-neutral-300 leading-snug">{{ step.description }}</p>
                  {% endif %}
                </div>
              </div>

              <div class="absolute -translate-x-1/2 pointer-events-none left-1/2 -bottom-1">
                <div class="flex items-center justify-center w-16 h-8 rounded-t-full shadow-lg transition-colors duration-300" :class="open ? 'bg-transparent text-teal-400' : 'bg-black/80 text-neutral-200'">
                  <svg class="w-5 h-5 transition-transform duration-300" :class="open ? 'rotate-180' : ''" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
            </div>
          </article>
          {% endfor %}
        </div>
      </div>

      <style>
        .frameworkJourney{
          position:relative;
          margin-top:-1px;
          margin-bottom:-1px;
          padding: var(--section-pad-block) 0;
          /* Make this section light (solutions-light background) */
          background:linear-gradient(180deg, var(--surface-1, #061021) 0%, var(--surface-1, #061021) 100%);
          width:100vw;
          margin-left:calc(50% - 50vw);
          margin-right:calc(50% - 50vw);
        }

        .frameworkJourney__wrap{
          width:100%;
          max-width:var(--page-max);
          margin:0 auto;
          display:flex;
          flex-direction:column;
          gap:clamp(40px,7vh,72px);
          padding:0 var(--page-pad);
        }

        .frameworkJourney__title{
          margin:0;
          color:#f8fafc;
          text-wrap:balance;
        }

        /* Match home 'The Elevate Path' card styles */
        .frameworkJourney .howE__grid{
          display:grid;
          gap:clamp(20px,3vw,28px);
          grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
          width:100%;
        }

        .frameworkJourney .howE__card{
          position:relative;
          display:flex;
          flex-direction:column;
          border-radius:32px;
          overflow:hidden;
          background:rgba(12,26,48,0.9);
          box-shadow:0 24px 48px rgba(8,17,33,0.45);
          isolation:isolate;
          transition:transform .35s ease, box-shadow .35s ease, border-color .35s ease;
        }

        .frameworkJourney .howE__card--open{
          box-shadow:0 30px 60px rgba(17,94,89,0.45);
          border-color:rgba(20,184,166,0.45);
        }

        .frameworkJourney .howE__card:hover{ transform:translateY(-4px); }
        .frameworkJourney .howE__card > div:first-child{ border-bottom:1px solid rgba(148,163,184,0.12); }
        .frameworkJourney .howE__card button{ transition:transform .45s cubic-bezier(.4,0,.2,1); }
        .frameworkJourney .howE__card button:hover{ transform:scale(1.02); }
        .frameworkJourney .howE__card button:focus-visible{ outline:2px solid rgba(20,184,166,.55); outline-offset:4px; }

        @media (max-width: 720px){
          .frameworkJourney .howE__grid{ grid-template-columns:1fr; }
        }

        @media (prefers-reduced-motion: reduce){
          .frameworkJourney .howE__card{ transition:none; }
          .frameworkJourney .howE__card button{ transition:none; }
        }
      </style>
      <script>
        // Match home manual-scroll behavior: no dots, start flush-left
        document.addEventListener('DOMContentLoaded', function(){
          var row = document.querySelector('section[data-cyber-services] #cyberServicesRow');
          if (!row) return;
          try { row.scrollLeft = 0; } catch(e){}
        });
      </script>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          const section = document.querySelector('[data-proof-kpis]');
          if (!section) return;

          const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

          const easeOutCubic = function (t) { return 1 - Math.pow(1 - t, 3); };

          function finalizeCount(el) {
            if (el.dataset.counted === 'true') return;
            const target = parseFloat(el.dataset.target);
            if (Number.isNaN(target)) return;
            const decimals = parseInt(el.dataset.decimals || '0', 10);
            const prefix = el.dataset.prefix || '';
            const suffix = el.dataset.suffix || '';
            el.textContent = prefix + target.toFixed(decimals) + suffix;
            el.dataset.counted = 'true';
          }

          function animateCount(el) {
            if (el.dataset.counted === 'true') return;
            const target = parseFloat(el.dataset.target);
            if (Number.isNaN(target)) return;
            const decimals = parseInt(el.dataset.decimals || '0', 10);
            const prefix = el.dataset.prefix || '';
            const suffix = el.dataset.suffix || '';
            const duration = parseInt(el.dataset.duration || '1500', 10);
            const startTime = performance.now();
            el.dataset.counted = 'true';
            el.textContent = prefix + (0).toFixed(decimals) + suffix;

            function update(now) {
              const progress = Math.min((now - startTime) / duration, 1);
              const eased = easeOutCubic(progress);
              const value = target * eased;
              el.textContent = prefix + value.toFixed(decimals) + suffix;
              if (progress < 1) {
                requestAnimationFrame(update);
              } else {
                el.textContent = prefix + target.toFixed(decimals) + suffix;
              }
            }

            requestAnimationFrame(update);
          }

          function activateKpis() {
            if (section.dataset.animated === 'true') return;
            section.dataset.animated = 'true';

            const countables = section.querySelectorAll('[data-count-up]');
            countables.forEach(el => {
              if (prefersReduced) {
                finalizeCount(el);
              } else {
                animateCount(el);
              }
            });

            section.querySelectorAll('[data-target-pct]').forEach(el => {
              const target = el.dataset.targetPct;
              if (typeof target !== 'undefined') {
                if (prefersReduced) {
                  el.style.setProperty('--pct', target);
                } else {
                  requestAnimationFrame(() => el.style.setProperty('--pct', target));
                }
              }
            });

            section.querySelectorAll('rect[data-target-height]').forEach(rect => {
              const height = rect.dataset.targetHeight;
              const y = rect.dataset.targetY;
              if (prefersReduced) {
                rect.setAttribute('height', height);
                rect.setAttribute('y', y);
              } else {
                requestAnimationFrame(() => {
                  rect.setAttribute('height', height);
                  rect.setAttribute('y', y);
                });
              }
            });

            const callout = section.querySelector('[data-callout]');
            if (callout) {
              if (prefersReduced) {
                callout.setAttribute('opacity', '1');
              } else {
                const animation = callout.animate(
                  { opacity: [0, 1] },
                  { duration: 500, delay: 600, easing: 'ease-out', fill: 'forwards' }
                );
                animation.addEventListener('finish', () => callout.setAttribute('opacity', '1'));
              }
            }
          }

          if (prefersReduced || typeof IntersectionObserver === 'undefined') {
            activateKpis();
            return;
          }

          const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                activateKpis();
                observer.disconnect();
              }
            });
          }, { threshold: 0.35 });

          observer.observe(section);
        });
      </script>
    </section>
    {% endif %}

    {% if services %}
    <section data-cyber-services>
      <div class="cyberServices">
        <header class="cyberServices__head">
          {% if servicesTitle %}
          <h2 class="cyberServices__title heading-xl">{{ servicesTitle | replace('Tailored to Your Business', '<span class="howTitleTeal">Tailored to Your Business</span>') | safe }}</h2>
          {% endif %}
          {% if servicesIntro %}
          <p class="body-lead">{{ servicesIntro }}</p>
          {% endif %}
        </header>

        {% if product == 'Cyber Security' or product == 'Managed Networks' or product == 'User & Device Management' or product == 'Cloud & Systems Services' or product == 'Professional Services' %}
        <div class="cyberServices__row" id="cyberServicesRow" role="list">
          {% for service in services %}
          {% set svcIcon = '/images/home/icons/teal/ShieldCheck.svg' %}
          {% if service.name and ('compli' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/ShieldCheckered.svg' %}{% endif %}
          {% if service.name and ('dns' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/Network.svg' %}{% endif %}
          {% if service.name and ('email' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/Devices.svg' %}{% endif %}
          {% if service.name and ('siem' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/CloudCheck.svg' %}{% endif %}
          {% if service.name and ('mfa' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/ShieldCheck.svg' %}{% endif %}
          {% if service.name and ('firewall' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/ShieldCheck.svg' %}{% endif %}
          <article class="cyberServiceCard" role="listitem">
            <h3 class="cyberServiceCard__title heading-md">{{ service.name }}</h3>
            <div class="cyberServiceCard__body">
              <p class="cyberServiceCard__text body-text">{{ service.description }}</p>
            </div>
          </article>
          {% endfor %}
        </div>
        <div class="svcDots" role="tablist" aria-label="Service slides"></div>
        {% else %}
        <div class="cyberServices__grid">
          {% for service in services %}
          {% set svcIcon = '/images/home/icons/teal/ShieldCheck.svg' %}
          {% if service.name and ('compli' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/ShieldCheckered.svg' %}{% endif %}
          {% if service.name and ('dns' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/Network.svg' %}{% endif %}
          {% if service.name and ('email' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/Devices.svg' %}{% endif %}
          {% if service.name and ('siem' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/CloudCheck.svg' %}{% endif %}
          {% if service.name and ('mfa' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/ShieldCheck.svg' %}{% endif %}
          {% if service.name and ('firewall' in (service.name | lower)) %}{% set svcIcon = '/images/home/icons/teal/ShieldCheck.svg' %}{% endif %}
          <article class="cyberServiceCard">
            <h3 class="cyberServiceCard__title heading-md">{{ service.name }}</h3>
            <div class="cyberServiceCard__body">
              <p class="cyberServiceCard__text body-text">{{ service.description }}</p>
            </div>
          </article>
          {% endfor %}
        </div>
        {% endif %}
      </div>

      <style>
        [data-cyber-services]{
          width:100vw;
          margin-left:calc(50% - 50vw);
          margin-right:calc(50% - 50vw);
          margin-top:-2px;
          margin-bottom:-2px;
          /* Use symmetric horizontal padding; align header via inner container */
          padding: var(--section-pad-block) 0;
          /* Solid dark background (no gradient) */
          background: var(--surface-0, #000000);
          background-color: var(--surface-0, #000000);
        }

        .cyberServices{
          max-width:var(--page-max);
          margin:0 auto;
          /* Inner container provides standard page padding for header alignment */
          padding:0 var(--page-pad);
          display:grid;
          gap:clamp(28px,5vh,56px);
        }

        /* (no left/right split; header sits above row for Cyber Security) */

        .cyberServices__head{
          display:grid;
          gap:clamp(10px,1.8vh,16px);
          max-width:none;
          width:100%;
        }

        .cyberServices__title{
          margin:0;
          color:#f8fafc;
          text-wrap:balance;
        }

        .cyberServiceCard__header{
          display:flex;
          flex-direction:column; /* stack like home services cards */
          align-items:flex-start;
          justify-content:flex-start;
          gap:clamp(12px, 2vw, 18px);
          margin:0;
        }
        .cyberServiceCard__icon{
          display:block;
          width:clamp(48px, 6vw, 60px); /* match home svcCard icon sizing */
          height:auto;
          filter:drop-shadow(0 12px 30px rgba(0,187,167,.28));
          flex:0 0 auto;
        }

        .cyberServices__grid{
          display:grid;
          gap:clamp(18px,2.8vw,26px);
        }

        @media(min-width:880px){
          .cyberServices__grid{ grid-template-columns:repeat(2,minmax(0,1fr)); }
        }

        .cyberServiceCard{
          position:relative;
          display:grid;
          gap:clamp(12px, 2vw, 20px); /* match hero highlight spacing */
          padding:clamp(24px, 3.2vw, 34px);
          border-radius:24px; /* match hero highlight */
          border:1px solid #1b2d46;
          /* Match hero highlight card surface */
          background:
            /* subtle cyan/blue tint to enhance blue */
            radial-gradient(280px 160px at 85% 0%, rgba(102,199,232,.12), rgba(102,199,232,0) 70%),
            linear-gradient(150deg, rgba(102,199,232,.06), rgba(102,199,232,0) 60%),
            /* base highlight layers */
            linear-gradient(135deg, rgba(0,0,0,.18) 0%, rgba(0,0,0,0.06) 40%),
            linear-gradient(315deg, rgba(0,0,0,.10) 0%, rgba(0,0,0,0.04) 44%),
            linear-gradient(210deg, rgba(2,6,23,.60) 0%, rgba(2,6,23,.66) 55%, rgba(2,6,23,.75) 100%);
          box-shadow:0 24px 56px rgba(8,18,35,.52), inset 0 1px 0 rgba(255,255,255,.06);
          overflow:hidden;
          transition:none; /* remove hover animation */
          isolation:isolate;
        }
        /* Decorative sheens like hero highlight cards */
        .cyberServiceCard::before,
        .cyberServiceCard::after{
          content:"";
          position:absolute;
          inset:0;
          pointer-events:none;
          transition:opacity .35s ease, transform .35s ease;
        }
        .cyberServiceCard::before{
          inset:-60% 24% 40% -30%;
          background:linear-gradient(120deg, rgba(0,0,0,.04) 0%, rgba(0,0,0,0) 70%);
          opacity:.04;
          transform:rotate(-6deg);
          filter:blur(18px);
        }
        .cyberServiceCard::after{
          inset:54% -32% -120% 28%;
          background: linear-gradient(212deg, rgba(0,0,0,.05) 0%, rgba(0,0,0,0) 68%);
          opacity:.06;
          transform:rotate(2deg);
          filter:blur(14px);
        }
        /* icon removed */

        /* Horizontal row for Cyber Security, Managed Networks, User & Device Management, Cloud & Systems Services, and Professional Services (simple cards) */
        {% raw %}{% endraw %}{% if product == 'Cyber Security' or product == 'Managed Networks' or product == 'User & Device Management' or product == 'Cloud & Systems Services' or product == 'Professional Services' %}
        .cyberServices__row{
          display:flex;
          gap:clamp(20px,4vw,40px);
          overflow-x:auto;
          width:100vw;
          max-width:none;
          box-sizing:border-box;
          margin-left:calc(50% - 50vw);
          margin-right:calc(50% - 50vw);
          /* top | right | bottom | left (left aligns under title like home) */
          padding:clamp(12px,2vw,20px) clamp(20px,4vw,40px) clamp(24px,3vw,36px) calc((100vw - var(--page-max)) / 2 + var(--page-pad));
          align-items:stretch;
          /* fully manual scrolling like home */
          scroll-snap-type:none;
          -webkit-overflow-scrolling:touch;
          touch-action:auto;
          overscroll-behavior-x:contain;
          overscroll-behavior-y:auto;
          scrollbar-width:thin;
          scrollbar-color:rgba(102,199,232,.6) rgba(15,32,56,.4);
        }
        .cyberServices__row::before,
        .cyberServices__row::after{ content:none; flex:0 0 0; }
        .cyberServices__row::-webkit-scrollbar{ height:8px; }
        .cyberServices__row::-webkit-scrollbar-track{ background:rgba(7,15,26,.6); border-radius:999px; }
        .cyberServices__row::-webkit-scrollbar-thumb{
          background:linear-gradient(135deg, rgba(102,199,232,.85), rgba(14,116,144,.85));
          border-radius:999px;
        }
        /* Card sizing within row */
        .cyberServices__row .cyberServiceCard{
          display:flex;
          flex-direction:column;
          justify-content:flex-start; /* no icon/header; keep natural spacing */
          flex:0 0 clamp(280px,40vw,480px);
          scroll-snap-align:start;
        }
        /* Dots under the row */
        /* Hide dots; behavior matches home manual scroll */
        [data-cyber-services] .svcDots{ display:none !important; }
        [data-cyber-services] .svcDot{
          width:clamp(10px, 1.2vw, 14px); height:clamp(10px, 1.2vw, 14px);
          border-radius:999px; cursor:pointer;
          border:1px solid rgba(148,163,184,.45);
          background:rgba(148,163,184,.28);
          transition:transform .18s ease, background-color .18s ease, border-color .18s ease, box-shadow .18s ease;
          outline:none;
        }
        [data-cyber-services] .svcDot:hover,
        [data-cyber-services] .svcDot:focus-visible{ transform:scale(1.12); box-shadow:0 0 0 3px rgba(102,199,232,.16); border-color:rgba(102,199,232,.65); }
        [data-cyber-services] .svcDot.is-active{
          background:linear-gradient(135deg,#66C7E8 0%, #00BBA7 100%);
          border-color:rgba(102,199,232,.85);
          box-shadow:0 0 0 4px rgba(102,199,232,.20);
          transform:translateY(-1px);
        }
        @media (pointer: coarse){ [data-cyber-services] .svcDot{ width:16px; height:16px; } }
        {% raw %}{% endraw %}{% endif %}

        .cyberServiceCard__body{
          position:relative;
          z-index:1;
          display:grid;
          gap:clamp(10px,1.8vh,16px);
        }

        .cyberServiceCard__title{
          margin:0;
          color:#f8fbff; /* match hero highlight title */
          letter-spacing:-.02em;
          line-height:1.15;
          font-weight:600;
        }
        /* Remove teal underline for service titles */

        .cyberServiceCard__text{
          margin:0; /* align with hero highlight body */
          color:rgba(214,224,236,.9);
          font-family:"Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
          font-size:clamp(16px, 2.4vw, 20px);
          line-height:1.65;
          font-weight:300;
          text-wrap:pretty;
          /* Uniform height across cards: clamp to N lines */
          --svc-lines: 3; /* default lines to show */
          display:-webkit-box;
          -webkit-box-orient:vertical;
          -webkit-line-clamp: var(--svc-lines);
          line-clamp: var(--svc-lines);
          overflow:hidden;
          text-overflow:ellipsis;
          /* Ensure shorter blurbs still occupy equal height */
          min-height: calc(1.65em * var(--svc-lines));
        }

        /* Allow an extra line on smaller screens for readability */
        @media (max-width: 640px){
          .cyberServiceCard__text{ --svc-lines: 4; }
        }

        .cyberServiceCard:is(:hover,:focus-within){
          /* No visual change on hover */
          transform:none;
          border-color:#1b2d46;
          box-shadow:0 24px 56px rgba(8,18,35,.52), inset 0 1px 0 rgba(255,255,255,.06);
        }

        @media (prefers-reduced-motion: reduce){
          .cyberServiceCard,
          .cyberServiceCard::before,
          .cyberServiceCard::after{ transition:none !important; }
        }
      </style>
    </section>
    {% endif %}
    {% if midCta %}
    <section class="midCtaShell" style="margin-top:-1px; margin-bottom:-1px;">
      <div class="midCtaWrap">
          <div class="midCtaCard{% if midCta.glow %} midCtaCard--glow{% endif %}">
          <div class="midCtaContent">
            {% if midCta.title %}
            <h2 class="midCtaTitle heading-xl">{{ midCta.title | replace('quick check','<span style="color:var(--brand);">quick check</span>') | replace('Quick Check','<span style="color:var(--brand);">Quick Check</span>') | safe }}</h2>
            {% endif %}
            {% if midCta.body %}
            <p class="body-lead mt-sm">{{ midCta.body }}</p>
            {% endif %}
          </div>
          {% if midCta.link and midCta.button %}
          <div class="midCtaActions">
            {% set midCtaButtonClass = "w-full md:w-auto" %}
            {% if midCta.glow %}
            {% set midCtaButtonClass = midCtaButtonClass + " midCtaButton" %}
            {% endif %}
            <a href="{{ midCta.link }}" data-cta="primary" class="{{ midCtaButtonClass }}">
              {{ midCta.button }}
              <img src="/images/icons/ArrowUpRightWhite.svg" alt="{{ midCta.button }}">
            </a>
          </div>
          {% endif %}
        </div>
      </div>
      <style>
        .midCtaShell{
          padding: var(--section-pad-tight) clamp(24px,4vw,40px) var(--section-pad-tight);
          background:linear-gradient(180deg, var(--surface-1, #061021) 0%, var(--surface-1, #061021) 100%);
          width:100vw;
          margin-left:calc(50% - 50vw);
          margin-right:calc(50% - 50vw);
          overflow:visible;
        }

        /* Mid CTA body: match home subhead typography */
        .midCtaShell .body-lead{
          font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
          font-size: clamp(17px, 2.6vw, 22px);
          line-height: 1.65;
          color:#ffffff;
        }

        .midCtaWrap{
          max-width:var(--page-max);
          margin:0 auto;
          padding:0 var(--page-pad);
          position:relative;
          overflow:visible;
        }

        .midCtaContent{
          display:grid;
          gap:clamp(12px,2vh,18px);
          text-align:center;
          justify-items:center;
          width:100%;
          max-width:min(820px,100%);
          margin:0 auto;
        }

        .midCtaTitle{
          margin:0;
          color:#f8fafc;
          text-wrap:balance;
        }

        .midCtaCard{
          position:relative;
          display:flex;
          flex-direction:column;
          gap:clamp(24px,3vw,32px);
          align-items:center;
          border-radius:0; /* remove card look */
          border:none;
          background:transparent;
          box-shadow:none;
          padding:0;
          overflow:visible;
          isolation:isolate;
          text-align:center;
          transition:none; /* no hover animation */
        }

        .midCtaCard::before,
        .midCtaCard::after{ content:none; }

        .midCtaCard::before{
          inset:-60% 24% 40% -30%;
          background:linear-gradient(120deg, rgba(188,214,255,.32) 0%, rgba(188,214,255,0) 65%);
          opacity:.28;
          transform:rotate(-7deg);
          mix-blend-mode:screen;
          filter:blur(16px);
        }

        .midCtaCard::after{
          inset:54% -32% -120% 28%;
          background:
            linear-gradient(212deg, rgba(82,140,200,.18) 0%, rgba(10,22,42,0) 68%),
            radial-gradient(120% 140% at 80% -20%, rgba(255,255,255,.16) 0%, rgba(255,255,255,0) 58%);
          opacity:.2;
          transform:rotate(3deg);
          filter:blur(12px);
        }

        .midCtaCard > *{
          position:relative;
          z-index:1;
        }

        .midCtaCard:is(:hover,:focus-visible){ transform:none; }

        .midCtaActions{
          display:flex;
          justify-content:center;
          width:100%;
        }

        {% if midCta.glow %}
        .midCtaCard--glow .midCtaButton{
          position:relative;
          isolation:isolate;
          box-shadow:0 24px 45px rgba(13,148,136,0.32);
        }

        .midCtaCard--glow .midCtaButton::before{
          content:"";
          position:absolute;
          inset:-22px;
          border-radius:999px;
          background:radial-gradient(circle at center, rgba(45,212,191,0.16), rgba(45,212,191,0));
          opacity:0;
          transform:scale(0.96);
          transition:opacity .3s ease, transform .3s ease;
          z-index:-1;
        }

        .midCtaCard--glow .midCtaButton:is(:hover,:focus-visible)::before{
          opacity:1;
          transform:scale(1.02);
        }

        @media (prefers-reduced-motion: reduce){
          .midCtaCard--glow .midCtaButton::before{ transition:none; }
          .midCtaCard--glow .midCtaButton:is(:hover,:focus-visible)::before{ transform:none; }
        }
        {% endif %}

        @media (max-width: 768px){
          .midCtaShell{
            padding-inline:clamp(18px,4vw,28px);
          }
        }

        @media (prefers-reduced-motion: reduce){
          .midCtaCard,
          .midCtaCard::before,
          .midCtaCard::after{
            transition:none !important;
          }
          .midCtaCard:is(:hover,:focus-visible){
            transform:none;
          }
        }
      </style>
    </section>
    {% endif %}

    {% if proofTitle or proofIntro %}
    <section data-proof-kpis style="background: var(--surface-0, #000000); padding: var(--section-pad-block) clamp(28px,4.6vw,44px) var(--section-pad-block); width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); margin-top:-1px; margin-bottom:-2px;">
      <div class="product-shell space-y-10">
        <div class="max-w-3xl space-y-4 text-white">
          {% if proofTitle %}
          <h2 class="heading-xl">{{ proofTitle | replace('Elevate Strengthens Security Outcomes', '<span class="howTitleTeal">Elevate Strengthens Security Outcomes</span>') | safe }}</h2>
          {% endif %}
          {% if proofIntro %}
          <p class="body-lead proofIntro">{{ proofIntro }}</p>
          {% endif %}
        </div>

        {% set proofEntries = [] %}
        {% if proofPoints %}
          {% set proofEntries = proofPoints %}
        {% endif %}
        {% set hasProofPoints = proofEntries | length %}

        {% if hasProofPoints %}
        <div class="l3-kpi-cards" role="group" aria-label="Key proof points">
          {% for point in proofEntries %}
          {% set pointTitle = point.title or point.claim %}
          {% set pointStat = point.stat %}
          {% set pointSource = point.source %}
          {% set metrics = point.metrics or point.graphs %}
          <section class="card">
            {% if pointTitle %}
            <h4 class="proofCard__title heading-md">{{ pointTitle }}</h4>
            {% endif %}
            {% if pointStat %}
            <p class="proofCard__subtitle body-text">{{ pointStat | safe }}</p>
            {% endif %}

            {% if metrics %}
            <div class="proof-metrics" role="list">
              {% for metric in metrics %}
              {% set metricLabel = metric.label %}
              {% set metricPrefix = metric.prefix or '' %}
              {% set metricSuffix = metric.suffix or '' %}
              {% set metricMax = metric.max or 100 %}
              {% set metricValue = metric.value or 0 %}
              {% set metricPct = (metricValue / metricMax * 100) %}
              {% if metricPct < 0 %}{% set metricPct = 0 %}{% endif %}
              {% if metricPct > 100 %}{% set metricPct = 100 %}{% endif %}
              <div class="proof-metric" role="listitem">
                {% if metricLabel %}<div class="proof-metric__label">{{ metricLabel }}</div>{% endif %}
                <div class="proof-metric__track" aria-hidden="true">
                  <span class="proof-metric__fill" style="width:{{ metricPct }}%;"></span>
                </div>
                <div class="proof-metric__value">{{ metricPrefix }}{{ metricValue }}{{ metricSuffix }}</div>
              </div>
              {% endfor %}
            </div>
            {% endif %}

            {% if pointSource %}
            <div class="card-description">
              <p class="proofCard__source body-sm">{{ pointSource }}</p>
            </div>
            {% endif %}
          </section>
          {% endfor %}
        </div>
        {% else %}
        <div class="l3-kpi-cards" role="group" aria-label="Three security stats">
          <section class="card">
            <h4 class="proofCard__title heading-md">Urgency of Proactive Defense</h4>
            <p class="proofCard__subtitle body-text">Time to detect and contain breaches</p>
            <div class="card-visual card-visual--bar">
              <div class="kpi">
                <span class="num" data-count-up data-target="258" data-decimals="0" data-duration="1400">258</span>
                <span class="unit" style="color:#fff;">days</span>
              </div>
              <div class="bar-wrap">
                <div class="bar" style="--pct:0" data-target-pct="86"></div>
                <div class="labels"><span>0</span><span>100</span><span>200</span><span>300</span></div>
              </div>
            </div>
            <div class="card-description">
              <p class="proofCard__clarifier body-text">Over <b>200 days</b> adds about <b>$1.12M</b> in costs.</p>
              <p class="proofCard__source body-sm">IBM Cost of a Data Breach Report, 2024</p>
            </div>
          </section>

          <section class="card">
            <h4 class="proofCard__title heading-md">Cost of a Breach for Growing Businesses</h4>
            <p class="proofCard__subtitle body-text">Avg. cost for smaller companies (≤500 staff)</p>
            <div class="card-visual card-visual--meter">
              <div class="kpi"><span class="num" data-count-up data-target="3.31" data-prefix="$" data-suffix="M" data-decimals="2" data-duration="1500">$3.31M</span></div>
              <div class="meter" style="--pct:0" data-target-pct="66">
                <div class="track"><div class="fill"></div></div>
                <div class="scale"><span>$0</span><span>$2.5M</span><span>$5M</span></div>
              </div>
            </div>
            <div class="card-description">
              <p class="proofCard__clarifier body-text">Smaller companies, 2022.</p>
              <p class="proofCard__source body-sm">IBM Cost of a Data Breach Report, 2022</p>
            </div>
          </section>

          <section class="card">
            <h4 class="proofCard__title heading-md">Value of Security Automation</h4>
            <p class="proofCard__subtitle body-text">Savings from AI &amp; automation</p>

            <div class="card-visual card-visual--chart">
              <svg class="v-bars" viewBox="0 0 300 220" width="100%" height="auto" aria-label="Bar chart showing higher cost without automation and lower cost with automation (−$2.2M)">
                <defs>
                  <linearGradient id="grad-red" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#f87171"/>
                    <stop offset="100%" stop-color="#ef4444"/>
                  </linearGradient>
                  <linearGradient id="grad-teal" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#3ba59c"/>
                    <stop offset="100%" stop-color="#158f84"/>
                  </linearGradient>
                </defs>
                <rect x="40" y="50" width="1" height="120" fill="#e5e7eb"/>
                <rect x="40" y="170" width="220" height="1" fill="#e5e7eb"/>
                <g fill="#94a3b8" font-size="14" font-family="'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, Arial">
                  <text x="28" y="174">$</text>
                  <text x="28" y="144">$</text>
                  <text x="28" y="114">$</text>
                  <text x="28" y="84">$</text>
                  <text x="28" y="54">$</text>
                </g>
                <rect x="95" y="170" width="48" height="0" fill="url(#grad-red)" rx="6" ry="6" data-target-height="120" data-target-y="50"/>
                <rect x="185" y="170" width="48" height="0" fill="url(#grad-teal)" rx="6" ry="6" data-target-height="84" data-target-y="86"/>
                <rect x="166" y="66" width="86" height="24" rx="12" ry="12" fill="#ecfdf5" stroke="#a7f3d0" opacity="0" data-callout=""/>
                <text x="209" y="83" text-anchor="middle" font-size="12" fill="#065f46" font-weight="800" font-family="'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif" data-count-up data-target="2.2" data-prefix="−$" data-suffix="M" data-decimals="1" data-duration="1500">−$2.2M</text>
                <g fill="#111827" font-size="12" font-family="'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif">
                  <text x="119" y="194" text-anchor="middle">Without</text>
                  <text x="209" y="194" text-anchor="middle">With</text>
                </g>
              </svg>
            </div>

            <div class="card-description">
              <p class="proofCard__clarifier body-text">Average savings: <b data-count-up data-target="2.2" data-prefix="−$" data-suffix="M" data-decimals="1" data-duration="1500">−$2.2M</b>.</p>
              <p class="proofCard__source body-sm">IBM Cost of a Data Breach Report, 2024</p>
            </div>
          </section>
        </div>
        {% endif %}
      </div>

      <style>
        .l3-kpi-cards{
          display:grid;
          grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
          gap:clamp(20px,3vw,28px);
          max-width:var(--page-max);
          margin:clamp(18px,3vh,32px) auto;
          padding:0 var(--page-pad);
          font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
        }

        .l3-kpi-cards .card{
          position:relative;
          overflow:hidden;
          text-align:center;
          /* Use cyber service card background style */
          background:
            radial-gradient(280px 160px at 85% 0%, rgba(102,199,232,.12), rgba(102,199,232,0) 70%),
            linear-gradient(150deg, rgba(102,199,232,.06), rgba(102,199,232,0) 60%),
            linear-gradient(135deg, rgba(0,0,0,.18) 0%, rgba(0,0,0,0.06) 40%),
            linear-gradient(315deg, rgba(0,0,0,.10) 0%, rgba(0,0,0,0.04) 44%),
            linear-gradient(210deg, rgba(2,6,23,.60) 0%, rgba(2,6,23,.66) 55%, rgba(2,6,23,.75) 100%);
          border:1px solid #1b2d46;
          border-radius:24px;
          padding:clamp(18px,2.6vw,26px);
          box-shadow:0 24px 56px rgba(8,18,35,.52), inset 0 1px 0 rgba(255,255,255,.06);
          display:flex;
          flex-direction:column;
          gap:clamp(10px,1.4vh,14px);
          min-height:clamp(260px,32vh,320px);
          color:#e2e8f0;
          isolation:isolate;
          transition:none; /* remove hover animation */
        }
        .l3-kpi-cards .card .proofCard__title,
        .l3-kpi-cards .card .proofCard__subtitle,
        .l3-kpi-cards .card .proof-metrics,
        .l3-kpi-cards .card .card-description{
          flex-shrink:0;
        }

        .l3-kpi-cards .card:hover,
        .l3-kpi-cards .card:focus-visible{
          /* No visual change on hover/focus */
          border-color:#1b2d46;
          box-shadow:0 24px 56px rgba(8,18,35,.52), inset 0 1px 0 rgba(255,255,255,.06);
          transform:none;
        }

        .l3-kpi-cards .kpi{
          display:flex;
          align-items:baseline;
          gap:6px;
        }

        .l3-kpi-cards .card-visual{
          display:flex;
          align-items:center;
          justify-content:center;
          flex-direction:column;
          gap:clamp(6px,1vh,10px);
          width:100%;
          flex:1 1 auto;
          min-height:clamp(120px,16vh,160px);
        }

        .l3-kpi-cards .card-visual--chart{
          align-items:center;
          justify-content:center;
        }

        .l3-kpi-cards .card-visual--meter{
          align-items:center;
        }

        .l3-kpi-cards .card-visual--chart .v-bars{
          width:100%;
          max-width:100%;
          height:auto;
        }

        .proof-metrics{
          display:grid;
          gap:clamp(12px,1.8vh,16px);
          margin-top:clamp(8px,1.4vh,14px);
          justify-items:center;
          text-align:center;
        }

        .proof-metric{
          display:grid;
          gap:6px;
          text-align:center;
        }

        .proof-metric__label{
          font-size:12px;
          text-transform:uppercase;
          letter-spacing:0.12em;
          color:rgba(148,204,255,0.72);
          text-align:center;
        }

        .proof-metric__track{
          position:relative;
          height:10px;
          border-radius:999px;
          background:rgba(148,163,184,0.18);
          overflow:hidden;
        }

        .proof-metric__fill{
          position:absolute;
          inset:0;
          background:linear-gradient(90deg,#3ba59c 0%,#2b7da8 100%);
          border-radius:inherit;
          box-shadow:0 0 12px rgba(59,165,156,0.26);
        }

        .proof-metric__value{
          font-weight:700;
          font-size:clamp(14px,1.8vw,18px);
          color:#3ba59c;
        }

        .l3-kpi-cards .card:nth-child(2) .proof-metric__fill,
        .l3-kpi-cards .card:nth-child(3) .proof-metric__fill{
          background:linear-gradient(90deg,#c56969 0%,#a83f3f 100%);
          box-shadow:0 0 14px rgba(200,105,105,0.28);
        }

        .l3-kpi-cards .card:nth-child(2) .proof-metric__value,
        .l3-kpi-cards .card:nth-child(2) .kpi .num,
        .l3-kpi-cards .card:nth-child(2) .unit,
        .l3-kpi-cards .card:nth-child(3) .proof-metric__value,
        .l3-kpi-cards .card:nth-child(3) .kpi .num,
        .l3-kpi-cards .card:nth-child(3) .unit{
          color:#da6d6d;
        }

        .proofCard__title{
          margin:2px 0 clamp(8px,1.1vh,12px);
          color:#f8fafc;
          letter-spacing:-.01em;
          overflow-wrap:anywhere;
          text-wrap:balance;
        }

        .proofCard__subtitle{
          margin:0;
          color:rgba(209,213,219,.92);
          line-height:1.65;
          overflow-wrap:anywhere;
        }

        .l3-kpi-cards .kpi .num{
          font-weight:800;
          font-size:clamp(32px,3.6vw,40px);
          color:#3ba59c;
        }

        .l3-kpi-cards .unit{
          font-size:clamp(12px,1.6vw,14px);
          color:#3ba59c;
          font-weight:700;
          text-transform:uppercase;
          letter-spacing:0.12em;
          margin-left:6px;
        }

        .l3-kpi-cards .bar-wrap{ margin-top:2px; }

        .l3-kpi-cards .bar,
        .l3-kpi-cards .meter .track{
          position:relative;
          height:10px;
          border-radius:999px;
          background:rgba(148,163,184,0.18);
          overflow:hidden;
        }

        .l3-kpi-cards .bar,
        .l3-kpi-cards .meter{
          --pct:0;
          width:100%;
        }

        .l3-kpi-cards .meter{
          display:flex;
          flex-direction:column;
          gap:6px;
          width:100%;
        }

        .l3-kpi-cards .bar-wrap{
          width:100%;
          display:flex;
          flex-direction:column;
          gap:6px;
          justify-content:center;
        }

        .l3-kpi-cards .bar::before,
        .l3-kpi-cards .meter .fill{
          content:"";
          position:absolute;
          left:0;
          top:0;
          bottom:0;
          width:calc(var(--pct,0)*1%);
          background:linear-gradient(90deg,#3ba59c 0%,#158f84 100%);
          border-radius:inherit;
          transition:width 1.1s cubic-bezier(0.33, 1, 0.68, 1);
        }

        .l3-kpi-cards .labels,
        .l3-kpi-cards .meter .scale{
          display:flex;
          justify-content:space-between;
          font-size:10px;
          color:rgba(148,163,184,0.7);
          margin-top:4px;
        }

        .l3-kpi-cards .card-description{
          margin-top:auto;
          padding-top:clamp(10px,1.6vh,14px);
          display:flex;
          flex-direction:column;
          gap:clamp(8px,1.2vh,12px);
          align-items:center;
          text-align:center;
          width:100%;
        }

        .proofCard__clarifier{
          margin:0;
          padding:10px 14px;
          border-radius:16px;
          background:rgba(20,184,166,0.12);
          border:1px solid rgba(45,212,191,0.28);
          color:#f8fafc;
          line-height:1.6;
        }

        .proofCard__source{
          margin:0;
          font-size:11px;
          letter-spacing:0.12em;
          text-transform:uppercase;
          color:rgba(148,163,184,0.68);
          font-weight:600;
          align-self:center;
          text-align:center;
        }

        .l3-kpi-cards .v-bars{
          display:block;
          max-width:100%;
          margin-top:0;
          shape-rendering:crispEdges;
        }

        .l3-kpi-cards svg rect[data-target-height]{
          transition:height 1.1s cubic-bezier(0.33, 1, 0.68, 1), y 1.1s cubic-bezier(0.33, 1, 0.68, 1);
        }

        @media (prefers-reduced-motion: reduce){
          .l3-kpi-cards .bar::before,
          .l3-kpi-cards .meter .fill,
          .l3-kpi-cards svg rect[data-target-height]{
            transition:none;
          }
        }

        .l3-kpi-cards .card:nth-child(3)::before{
          inset:-28% -12% 55% -18%;
          background:radial-gradient(circle at 18% 18%, rgba(45,212,191,0.18), transparent 60%);
        }

        .l3-kpi-cards .card:nth-child(-n+2) .kpi .num{
          color:#fca5a5;
          background:linear-gradient(120deg,#f97373 0%,#ef4444 100%);
          -webkit-background-clip:text;
          -webkit-text-fill-color:transparent;
        }

        .l3-kpi-cards .card:nth-child(-n+2) .unit{
          color:#fecaca;
        }

        .l3-kpi-cards .card:nth-child(1) .bar::before,
        .l3-kpi-cards .card:nth-child(2) .meter .fill{
          background:linear-gradient(90deg,#3ba59c 0%,#158f84 100%);
        }

      </style>
    </section>
    {% endif %}
    {% if caseStudiesLinks %}
    {% set hasGraphs = false %}
    {% for case in caseStudiesLinks %}
      {% if case.graphs is defined %}
        {% set hasGraphs = true %}
      {% endif %}
    {% endfor %}
    <section style="background: var(--surface-1, #061021); padding: var(--section-pad-block) clamp(28px,4.6vw,44px); width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); margin-top:-2px; margin-bottom:-2px;">
      <div class="product-shell space-y-8">
        <div class="max-w-3xl space-y-4">
          {% if caseStudiesTitle %}
          <h2 class="caseStudies__title heading-xl">{{ caseStudiesTitle | replace('Success Stories', '<span class="howTitleTeal">Success Stories</span>') | safe }}</h2>
          {% endif %}
          {% if caseStudiesIntro %}
          <p class="body-lead csIntro">{{ caseStudiesIntro }}</p>
          {% endif %}
        </div>

        {% if hasGraphs %}
        <div class="caseGraphs" data-case-graphs>
          {% for case in caseStudiesLinks %}
          {% if case.graphs is defined %}
          <article class="caseGraph">
            <div class="caseGraph__head">
              <h3 class="caseGraph__title">{{ case.claim }}</h3>
            </div>
            <p class="caseGraph__stat">{{ case.stat | safe }}</p>
            <div class="caseGraph__metrics">
              {% for metric in case.graphs %}
              <div class="caseGraph__metric">
                {% if metric.label %}<span class="caseGraph__metricLabel">{{ metric.label }}</span>{% endif %}
                <div class="caseGraph__bar" data-graph-fill data-graph-value="{{ metric.value }}" data-graph-max="{{ metric.max | default(100) }}">
                  <span class="caseGraph__fill"></span>
                </div>
                <span class="caseGraph__value">{{ metric.value }}{% if metric.suffix %}{{ metric.suffix }}{% endif %}</span>
              </div>
              {% endfor %}
            </div>
            {% if case.source %}
            <div class="caseGraph__footer">
              <span class="caseGraph__source">{{ case.source }}</span>
            </div>
            {% endif %}
          </article>
          {% endif %}
          {% endfor %}
        </div>
        {% else %}
        <div class="caseStudiesCardGrid">
          {% for item in caseStudiesLinks %}
          {% if item.href %}
          <a href="{{ item.href }}" class="caseStudiesCard">
          {% else %}
          <div class="caseStudiesCard">
          {% endif %}
            <span class="caseStudiesCard__eyebrow">Case Studies</span>
            <h3 class="caseStudiesCard__title">Lorem ipsum dolor sit amet</h3>
            <p class="caseStudiesCard__description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            <span class="caseStudiesCard__source">Lorem ipsum</span>
          {% if item.href %}
          </a>
          {% else %}
          </div>
          {% endif %}
          {% endfor %}
        </div>
        {% endif %}
      </div>
      <style>
        /* Proof intro typography */
        .proofIntro{
          font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
          font-size: clamp(17px, 2.6vw, 22px);
          line-height: 1.65;
          color:#ffffff;
        }

        /* Case studies intro: match home subhead typography */
        .csIntro{
          margin:clamp(6px,1.2vh,10px) 0 0; /* small space below title */
          font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
          font-size: clamp(17px, 2.6vw, 22px);
          line-height: 1.65;
          color:#e6edf6;
        }

        .caseStudies__title{
          margin:0;
          color:#f8fafc;
          text-wrap:balance;
        }

        .caseGraphs{display:grid;gap:clamp(18px,3vw,28px);}
        @media(min-width:980px){.caseGraphs{grid-template-columns:repeat(3,minmax(0,1fr));}}
        .caseGraph{position:relative;display:grid;gap:clamp(10px,1.6vh,16px);padding:clamp(22px,3vw,28px);border-radius:24px;border:1px solid rgba(148,204,255,0.18);background:linear-gradient(150deg,rgba(12,22,38,0.88),rgba(3,10,24,0.94));box-shadow:0 26px 56px rgba(0,0,0,0.45);overflow:hidden;}
        .caseGraph__head{display:flex;align-items:flex-start;gap:clamp(8px,1vw,12px);}
        .caseGraph__title{margin:0;font-size:clamp(18px,2vw,22px);font-weight:700;color:#f8fafc;}
        .caseGraph__footer{margin-top:auto;display:flex;justify-content:flex-end;}
        .caseGraph__source{display:inline-flex;align-items:center;padding:.25rem .65rem;border-radius:999px;background:rgba(102,199,232,.08);border:1px solid rgba(102,199,232,.24);font-size:12px;color:rgba(148,163,184,0.8);text-transform:uppercase;letter-spacing:0.16em;}
        .caseGraph__stat{margin:0;color:rgba(226,232,240,0.86);line-height:1.6;font-size:14px;}
        .caseGraph__metrics{display:grid;gap:clamp(12px,1.8vh,16px);}
        .caseGraph__metric{display:grid;gap:6px;}
        .caseGraph__metricLabel{font-size:12px;color:rgba(148,204,255,0.72);letter-spacing:0.08em;text-transform:uppercase;}
        .caseGraph__bar{position:relative;height:12px;border-radius:999px;background:rgba(148,204,255,0.16);overflow:hidden;}
        .caseGraph__fill{position:absolute;inset:0;width:0;background:linear-gradient(90deg,#3ba59c,#158f84);box-shadow:0 0 18px rgba(59,165,156,0.3);transition:width 1.1s cubic-bezier(0.33,1,0.68,1);}
        .caseGraph__value{font-weight:700;color:#3ba59c;font-size:clamp(14px,1.8vw,16px);}
        .caseStudiesCardGrid{display:grid;gap:clamp(16px,2.6vw,24px);}
        @media(min-width:900px){.caseStudiesCardGrid{grid-template-columns:repeat(3,minmax(0,1fr));}}
        .caseStudiesCard{display:flex;flex-direction:column;gap:clamp(16px,2vw,20px);padding:clamp(24px,3vw,30px);border-radius:24px;border:1px solid #1b2d46;background:
          radial-gradient(280px 160px at 85% 0%, rgba(102,199,232,.12), rgba(102,199,232,0) 70%),
          linear-gradient(150deg, rgba(102,199,232,.06), rgba(102,199,232,0) 60%),
          linear-gradient(135deg, rgba(0,0,0,.18) 0%, rgba(0,0,0,0.06) 40%),
          linear-gradient(315deg, rgba(0,0,0,.10) 0%, rgba(0,0,0,0.04) 44%),
          linear-gradient(210deg, rgba(2,6,23,.60) 0%, rgba(2,6,23,.66) 55%, rgba(2,6,23,.75) 100%);
          box-shadow:0 24px 56px rgba(8,18,35,.52), inset 0 1px 0 rgba(255,255,255,.06);transition:transform .25s ease,box-shadow .25s ease,border-color .25s ease;text-decoration:none;}
        /* Remove glow/lift on hover for success stories cards */
        .caseStudiesCard:hover,
        .caseStudiesCard:focus-within{
          transform:none;
          border-color:#1b2d46;
          box-shadow:0 24px 56px rgba(8,18,35,.52), inset 0 1px 0 rgba(255,255,255,.06);
        }
        .caseStudiesCard__eyebrow{font-size:0.7rem;letter-spacing:0.28em;text-transform:uppercase;font-weight:600;color:rgba(94,234,212,0.85);}
        .caseStudiesCard__title{font-size:clamp(20px,2.2vw,24px);font-weight:600;line-height:1.35;color:#f8fafc;}
        .caseStudiesCard__description{font-size:clamp(14px,1.9vw,16px);line-height:1.65;color:rgba(226,232,240,0.85);font-weight:300;}
        .caseStudiesCard__source{margin-top:auto;font-size:0.8rem;letter-spacing:0.12em;text-transform:uppercase;font-weight:600;color:rgba(148,163,184,0.85);}
        @media (max-width: 768px){.caseStudiesCard{padding:clamp(20px,4vw,26px);}}
      </style>
    </section>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        var bars = document.querySelectorAll('[data-graph-fill]');
        if (!bars.length) return;
        var reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        function activate(bar){
          if (bar.dataset.graphReady === 'true') return;
          var value = parseFloat(bar.dataset.graphValue);
          var max = parseFloat(bar.dataset.graphMax) || 100;
          if (!isFinite(value) || !isFinite(max) || max <= 0) return;
          var pct = Math.max(0, Math.min(100, (value / max) * 100));
          var fill = bar.querySelector('.caseGraph__fill');
          if (!fill) return;
          if (reduceMotion) {
            fill.style.width = pct + '%';
          } else {
            requestAnimationFrame(function(){ fill.style.width = pct + '%'; });
          }
          bar.dataset.graphReady = 'true';
        }
        if (typeof IntersectionObserver === 'function' && !reduceMotion) {
          var observer = new IntersectionObserver(function(entries){
            entries.forEach(function(entry){
              if (entry.isIntersecting) {
                activate(entry.target);
                observer.unobserve(entry.target);
              }
            });
          }, { threshold: 0.35 });
          bars.forEach(function(bar){ observer.observe(bar); });
        } else {
          bars.forEach(activate);
        }
      });
    </script>
    {% endif %}

    {% if vendorsLogos %}
    <section style="background: var(--surface-0, #000000); padding: var(--section-pad-block) clamp(28px,4.6vw,44px) var(--section-pad-block); width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); margin-top:-2px; margin-bottom:-2px;">
      <div class="product-shell space-y-8">
        <div class="max-w-3xl space-y-4">
          {% if vendorsTitle %}
          <h2 class="vendors__title heading-xl">{{ vendorsTitle }}</h2>
          {% endif %}
        {% if vendorsBody %}
          <p class="body-lead">{{ vendorsBody }}</p>
          {% endif %}
        </div>
        <div class="relative w-full mt-8">
          <div class="swiper vendor-swiper px-12" id="vendorSwiper">
            <div class="swiper-wrapper items-center">
              {% for logo in vendorsLogos %}
              <div class="swiper-slide flex items-center justify-center py-6">
                <div class="flex items-center justify-center w-full max-w-[180px] px-6 py-4 border rounded-2xl border-white/5 bg-white/5 backdrop-blur">
                  <img class="block h-12" src="{{ logo.src }}" alt="{{ logo.alt }}">
                </div>
              </div>
              {% endfor %}
            </div>

          </div>
          <style>
            .vendors__title{
              margin:0;
              color:#f8fafc;
              text-wrap:balance;
            }

            #vendorSwiper .swiper-wrapper {
              transition-timing-function: linear !important;
            }
          </style>
        </div>
      </div>
    </section>
    {% endif %}

    {% if testimonial %}
    <!-- PROVEN RESULTS (home carousel version) -->
    <article class="section-block" style="
      position:relative; overflow:hidden; isolation:isolate;
      background:linear-gradient(180deg, var(--surface-0, #000000) 0%, var(--surface-0, #000000) 100%) !important;
      padding: var(--section-pad-block) 0; min-height:92svh; display:flex; align-items:center;
      width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw);
      margin-top:-1px; margin-bottom:-1px;
    ">
      <div class="section-shell product-shell" style="position:relative; z-index:1;">
        <div style="display:flex; align-items:flex-end; justify-content:flex-start; gap:18px; flex-wrap:wrap;">
          <div>
            <h2 class="heading-xl mb-sm">
              <span style="color:#ffffff;">Proven Results.</span> <span style="color:var(--brand);">Real Impact.</span>
            </h2>
          </div>
        </div>

        <p class="body-lead measure mb-md">
          Technology challenges can be frustrating—we deliver tailored solutions and 24/7 support to reduce downtime and secure your systems.
        </p>

        <!-- Testimonials carousel (one full-width card at a time) -->
        <div class="resultsCarousel" id="resultsCarousel" aria-label="Client testimonials" role="region">
          <!-- Slide 1 -->
          <article class="resultsSlide" role="group" aria-roledescription="slide" aria-label="1 of 3">
            <div class="resultsGrid">
              <div class="resultsCard">
                <div class="resultsCard__head">
                  <span class="resultsCard__badge" aria-hidden="true">
                    <svg width="24" height="24" viewBox="0 0 24 24">
                      <path d="M9.983 3v7.391c0 5.704-3.731 9.57-8.983 10.609l-.995-2.151c2.432-.917 3.995-3.638 3.995-5.849h-4v-10h9.983zm14.017 0v7.391c0 5.704-3.748 9.571-9 10.609l-.996-2.151c2.433-.917 3.996-3.638 3.996-5.849h-3.983v-10h9.983z"/>
                    </svg>
                  </span>
                  <p class="resultsCard__quote">
                    Not only do we rely upon L3 Networks for all our day-to-day cybersecurity and SOC needs, but they have also helped guide us towards SOC2 Type 2 compliance which adds value to our organization in a competitive market with growing cybersecurity demands. They are an experienced strategic partner that goes the extra mile without being asked!
                  </p>
                </div>
                <footer class="resultsCard__foot">
                  <div class="resultsCard__person">
                    <span class="resultsCard__name">LeeAnn S</span>
                    <span class="resultsCard__role">C Level – Exodus Recovery</span>
                  </div>
                </footer>
              </div>
              <figure class="resultsImage" aria-hidden="true">
                <img src="https://alumniventures.imgix.net/2022/03/shutterstock_2101931002.jpg?auto=format&fit=max&w=3840&q=40" alt="" />
              </figure>
            </div>
          </article>

          <!-- Slide 2 -->
          <article class="resultsSlide" role="group" aria-roledescription="slide" aria-label="2 of 3">
            <div class="resultsGrid">
              <div class="resultsCard">
                <div class="resultsCard__head">
                  <span class="resultsCard__badge" aria-hidden="true">
                    <svg width="24" height="24" viewBox="0 0 24 24">
                      <path d="M9.983 3v7.391c0 5.704-3.731 9.57-8.983 10.609l-.995-2.151c2.432-.917 3.995-3.638 3.995-5.849h-4v-10h9.983zm14.017 0v7.391c0 5.704-3.748 9.571-9 10.609l-.996-2.151c2.433-.917 3.996-3.638 3.996-5.849h-3.983v-10h9.983z"/>
                    </svg>
                  </span>
                  <p class="resultsCard__quote">
                    L3 has proven to be an invaluable security MSP partner in helping us plan and evolve our IT security. Their support teams are truly available 24/7 and are highly experienced. I would recommend L3 to any business that needs security help.
                  </p>
                </div>
                <footer class="resultsCard__foot">
                  <div class="resultsCard__person">
                    <span class="resultsCard__name">Royce N</span>
                    <span class="resultsCard__role">IT Director – DG Architects</span>
                  </div>
                </footer>
              </div>
              <figure class="resultsImage" aria-hidden="true">
                <img src="https://alumniventures.imgix.net/2022/03/shutterstock_2101931002.jpg?auto=format&fit=max&w=3840&q=40" alt="" />
              </figure>
            </div>
          </article>

          <!-- Slide 3 -->
          <article class="resultsSlide" role="group" aria-roledescription="slide" aria-label="3 of 3">
            <div class="resultsGrid">
              <div class="resultsCard">
                <div class="resultsCard__head">
                  <span class="resultsCard__badge" aria-hidden="true">
                    <svg width="24" height="24" viewBox="0 0 24 24">
                      <path d="M9.983 3v7.391c0 5.704-3.731 9.57-8.983 10.609l-.995-2.151c2.432-.917 3.995-3.638 3.995-5.849h-4v-10h9.983zm14.017 0v7.391c0 5.704-3.748 9.571-9 10.609l-.996-2.151c2.433-.917 3.996-3.638 3.996-5.849h-3.983v-10h9.983z"/>
                    </svg>
                  </span>
                  <p class="resultsCard__quote">
                    Our business continues to grow, and our IT needs are always changing. L3 Networks keeps us structured and ensures that our systems are secure, our data remains protected, and our network efficiently configured. With their expertise and guidance, we greatly decrease our risk of security breaches. L3 is a great partner with competitive costs and focused service.
                  </p>
                </div>
                <footer class="resultsCard__foot">
                  <div class="resultsCard__person">
                    <span class="resultsCard__name">Bruce M</span>
                    <span class="resultsCard__role">C Level – American Textile Maintenance</span>
                  </div>
                </footer>
              </div>
              <figure class="resultsImage" aria-hidden="true">
                <img src="https://alumniventures.imgix.net/2022/03/shutterstock_2101931002.jpg?auto=format&fit=max&w=3840&q=40" alt="" />
              </figure>
            </div>
          </article>
        </div>

        <!-- radio dots hidden/omitted for now -->

        <style>
          .resultsCarousel{
            position:relative;
            margin-top:clamp(24px,3vw,32px);
            overflow:hidden;
            min-height:0;
            transition:height .28s ease;
          }
          .resultsGrid{ display:grid; grid-template-columns:minmax(0,.9fr) minmax(0,1.1fr); gap:clamp(18px,2.4vw,28px); align-items:stretch; }
          .resultsImage{ margin:0; border-radius:20px; overflow:hidden; background:#0b1629; display:flex; align-items:stretch; }
          .resultsImage img{ width:100%; height:100%; object-fit:cover; display:block; }
          .resultsSlide{ position:absolute; left:0; right:0; top:0; opacity:0; transition:opacity .35s ease; pointer-events:none; will-change:opacity; }
          .resultsSlide.is-active{ opacity:1; pointer-events:auto; }
          .resultsCarousel .resultsCard:hover,
          .resultsCarousel .resultsCard:focus-within{ transform:none; box-shadow:0 24px 48px rgba(8,18,35,0.45), inset 0 1px 0 rgba(255,255,255,0.08); }
          .resultsCard{ position:relative; padding:clamp(24px,2.8vw,32px); border-radius:20px; background:
            linear-gradient(135deg, rgba(0,0,0,.18) 0%, rgba(0,0,0,0.06) 40%),
            linear-gradient(315deg, rgba(0,0,0,.10) 0%, rgba(0,0,0,0.04) 44%),
            linear-gradient(210deg, rgba(2,6,23,.60) 0%, rgba(2,6,23,.66) 55%, rgba(2,6,23,.75) 100%);
            border:1px solid #1b2d46; box-shadow:0 24px 56px rgba(8,18,35,.52), inset 0 1px 0 rgba(255,255,255,.06);
            display:grid; gap:clamp(18px,2.4vw,26px); transition:transform .25s ease, border-color .25s ease, box-shadow .25s ease; overflow:hidden; color:#e2e8f0; }
          .resultsCard::before{ content:none; }
          .resultsCard:hover,
          .resultsCard:focus-within{ transform:translateY(-6px); border-color:#66C7E8; box-shadow:0 24px 56px rgba(8,18,35,.52), inset 0 1px 0 rgba(255,255,255,.08); }
          .resultsCard:hover::before,
          .resultsCard:focus-within::before{ opacity:0; }
          .resultsCard__head{ display:grid; gap:clamp(14px,2vw,18px); }
          .resultsCard__badge{ width:44px; aspect-ratio:1; border-radius:14px; background:linear-gradient(145deg, rgba(0,187,167,.22), rgba(102,199,232,.18)); display:grid; place-items:center; color:var(--brand); }
          .resultsCard__badge svg{ fill:rgba(0,187,167,.85); }
          .resultsCard__quote{ margin:0; color:#eef9ff; font-size:clamp(1rem,1.6vw,1.12rem); line-height:1.7; font-style:italic; }
          .resultsCard__foot{ display:flex; align-items:flex-start; justify-content:flex-start; gap:clamp(10px,1.6vw,14px); border-top:1px solid rgba(148,204,255,.22); padding-top:clamp(14px,2vw,18px); }
          .resultsCard__person{ display:grid; gap:4px; text-align:left; }
          .resultsCard__name{ font-weight:700; color:#f1fbff; font-size:.95rem; }
          .resultsCard__role{ font-size:.85rem; color:rgba(203,213,225,.76); }
          @media (max-width: 960px){ .resultsGrid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
          @media (max-width: 640px){ .resultsGrid{ grid-template-columns:minmax(0,1fr); } .resultsCard__foot{ flex-direction:column; } }
        </style>

        <!-- Carousel script (copied from home) -->
        <script>
          (function(){
            function ready(fn){ if (document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', fn, { once:true }); } else { fn(); } }
            ready(function(){
              var wrap = document.getElementById('resultsCarousel'); if (!wrap) return;
              var slides = Array.prototype.slice.call(wrap.querySelectorAll('.resultsSlide'));
              var current = 0; var timer = null; var interval = 6000;
              function clamp(i){ return Math.max(0, Math.min(slides.length-1, i)); }
              function maxSlideHeight(){ var max=0; for (var i=0;i<slides.length;i++){ var card=slides[i].querySelector('.resultsCard'); var h=card?card.offsetHeight:slides[i].offsetHeight; if (h>max) max=h; } return max; }
              function setHeights(){ var desktop = window.matchMedia('(min-width: 860px)').matches; var h = maxSlideHeight(); if (desktop && h && h>0){ wrap.style.height=h+'px'; for (var i=0;i<slides.length;i++){ var card=slides[i].querySelector('.resultsCard'); var img=slides[i].querySelector('.resultsImage'); if(card){ card.style.minHeight=h+'px'; card.style.height=h+'px'; } if(img){ img.style.height=h+'px'; } } } else { wrap.style.height=''; for (var j=0;j<slides.length;j++){ var c=slides[j].querySelector('.resultsCard'); var im=slides[j].querySelector('.resultsImage'); if(c){ c.style.minHeight=''; c.style.height=''; } if(im){ im.style.height=''; } } } }
              function setActive(i){ current = clamp(i); slides.forEach(function(s,idx){ var on = idx===current; s.classList.toggle('is-active', on); s.setAttribute('aria-hidden', on? 'false':'true'); }); setHeights(); }
              function next(){ setActive(current+1 >= slides.length ? 0 : current+1); }
              function pause(){ if (timer){ clearInterval(timer); timer=null; } }
              function resume(){ pause(); timer=setInterval(next, interval); }
              setActive(0);
              wrap.addEventListener('pointerenter', pause, { passive:true });
              wrap.addEventListener('pointerleave', resume, { passive:true });
              window.addEventListener('resize', setHeights);
              setHeights();
              resume();
            });
          })();
        </script>
      </div>
    </article>
    {% endif %}

    

{% if relatedContent %}
    <section class="section-block" data-resources="insights" style="padding:clamp(80px,14vh,220px) 0; position:relative; overflow:hidden; isolation:isolate; background:linear-gradient(180deg, var(--surface-1, #061021) 0%, var(--surface-1, #061021) 100%) !important; min-height:92svh; display:flex; align-items:center; color:#e2e8f0; width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw);">
      <div class="product-shell" style="text-align:left; position:relative; z-index:1;">
        <h2 class="heading-xl" style="margin:0 0 clamp(32px,4vw,44px); color:var(--ink);">Latest Insights to <span style="color:var(--brand);">Keep You Secure</span></h2>

        <div class="rcDemo">
          <div class="rcDemo__grid">
            {% set miniResources = [
              {t:'Why Your Help Desk Is Slowing Down', d:'How to speed up response and resolution.', type:'Blog', tags:['Productivity','Service Desk'], img:'https://sandbox.l3networks.com/images/optimized/why-your-help-desk-is-slowing-down-your-business-and-how-to-fix-it-640w.webp'},
              {t:'AI Isn’t Replacing IT — It’s Empowering It', d:'Practical ways to use AI in IT today.', type:'Blog', tags:['AI','Operations'], img:'https://sandbox.l3networks.com/images/optimized/ai-isnt-replacing-it-its-empowering-it-640w.webp'},
              {t:'Zero Trust — A Practical Starter', d:'A simple baseline to get moving.', type:'Guide', tags:['Cybersecurity','Zero Trust'], img:'https://sandbox.l3networks.com/images/optimized/what-makes-a-modern-help-desk-640w.webp'}
            ] %}

            {% for res in miniResources %}
            <article class="rcDemo__card">
              <a href="/resources/" class="rcDemo__thumb" aria-label="{{ res.t }}">
                <div class="rcDemo__thumbBadge">{{ res.type }}</div>
                <div class="rcDemo__thumbImg" aria-hidden="true">
                  {% if res.img %}
                    <img src="{{ res.img }}" alt="">
                  {% else %}
                    Resource
                  {% endif %}
                </div>
              </a>
              <div class="rcDemo__cardBody">
                <p class="rcDemo__type">{{ res.type }}</p>
                <a href="/resources/" class="rcDemo__titleLink"><h3 class="rcDemo__cardTitle">{{ res.t }}</h3></a>
                <p class="rcDemo__copy">{{ res.d }}</p>
              </div>
            </article>
            {% endfor %}
          </div>

          <div class="insightsCTA rcDemo__ctaWrap">
            <a href="/resources/" class="rcDemo__cta">
              Visit Resource Center
              <img src="/images/icons/ArrowUpRightWhite.svg" alt="Visit Resource Center" style="height:18px;">
            </a>
          </div>
        </div>

        <style>
          .rcDemo__grid{display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:clamp(18px,3vw,28px)}
          .rcDemo__card{background:#0b0f1a; border:1px solid #0f172a; border-radius:16px; overflow:hidden; display:flex; flex-direction:column; transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease}
          .rcDemo__card:hover{transform:translateY(-3px); box-shadow:0 18px 36px rgba(0,0,0,.45); border-color:#1f2a44}
          .rcDemo__thumb{position:relative; display:block}
          .rcDemo__thumbImg{width:100%; aspect-ratio:16/9; background:linear-gradient(180deg,#0b1325,#0c1220); display:grid; place-items:center; color:#cbd5e1; font-size:.85rem}
          .rcDemo__thumbImg img{width:100%; height:100%; object-fit:cover; display:block}
          .rcDemo__thumbBadge{position:absolute; top:12px; left:12px; background:#14b8a6; color:#000; font-weight:700; font-size:.72rem; padding:.3rem .6rem; border-radius:999px}
          .rcDemo__cardBody{padding:clamp(16px,2.4vw,22px)}
          .rcDemo__type{margin:.1rem 0 .5rem; color:#94a3b8; font-size:.8rem}
          .rcDemo__titleLink{text-decoration:none}
          .rcDemo__cardTitle{margin:0 0 .5rem; color:#e6edf6; font-size:1.08rem; font-weight:700; letter-spacing:-.01em}
          .rcDemo__copy{margin:0; color:#cbd5e1; font-size:.95rem; line-height:1.55}

          .rcDemo__ctaWrap{margin-top:clamp(28px,4vw,44px); display:flex; justify-content:center}
          .rcDemo__cta{display:inline-flex; align-items:center; gap:.6rem; padding:.95rem 1.3rem; font-weight:600; font-size:clamp(14px,2.4vw,18px); color:#fff; background:#00BBA7; border-radius:999px; text-decoration:none; box-shadow:0 10px 28px rgba(0,187,167,.35); transition:transform .18s ease, box-shadow .18s ease, filter .18s ease}
          .rcDemo__cta:hover{transform:translateY(-1px); box-shadow:0 16px 34px rgba(0,187,167,.45); filter:saturate(1.05)}

          @media (max-width: 960px){
            .rcDemo__grid{grid-template-columns:repeat(2,minmax(0,1fr))}
          }
          @media (max-width: 640px){
            .rcDemo__grid{grid-template-columns:minmax(0,1fr)}
          }
        </style>
      </div>
    </section>
    {% endif %}

    {% if bottomCta %}
    <section class="bottomCtaShell" style="margin-top:-1px; margin-bottom:-1px;">
      <div class="bottomCtaWrap">
        <div class="bottomCtaCard">
          <div class="bottomCtaContent">
            {% if bottomCta.title %}
            <h2 class="bottomCtaTitle heading-xl">{{ bottomCta.title }}</h2>
            {% endif %}
            {% if bottomCta.body %}
            <p class="bottomCtaCopy body-lead">{{ bottomCta.body }}</p>
            {% endif %}
          </div>
          {% if bottomCta.link and bottomCta.button %}
          <div class="bottomCtaActions">
            <a href="{{ bottomCta.link }}" data-cta="primary">
              {{ bottomCta.button }}
              <img src="/images/icons/ArrowUpRightWhite.svg" alt="{{ bottomCta.button }}">
            </a>
          </div>
          {% endif %}
        </div>
      </div>
      <style>
        .bottomCtaShell{
          padding:clamp(72px,11vh,150px) clamp(28px,4.6vw,44px) clamp(88px,12vh,160px);
          background:linear-gradient(180deg, var(--surface-1, #061021) 0%, var(--surface-1, #061021) 100%);
          width:100vw;
          margin-left:calc(50% - 50vw);
          margin-right:calc(50% - 50vw);
        }

        .bottomCtaWrap{
          max-width:var(--page-max);
          margin:0 auto;
          padding:0 var(--page-pad);
        }

        .bottomCtaCard{
          display:flex;
          flex-direction:column;
          gap:clamp(22px,3vw,32px);
          align-items:center;
          padding:clamp(32px,4.6vw,52px);
          border-radius:clamp(28px,4vw,40px);
          border:1px solid #1b2d46;
          /* Match hero highlight card surface color */
          background:
            linear-gradient(135deg, rgba(0,0,0,.18) 0%, rgba(0,0,0,0.06) 40%),
            linear-gradient(315deg, rgba(0,0,0,.10) 0%, rgba(0,0,0,0.04) 44%),
            linear-gradient(210deg, rgba(2,6,23,.60) 0%, rgba(2,6,23,.66) 55%, rgba(2,6,23,.75) 100%);
          box-shadow:0 24px 56px rgba(8,18,35,.52), inset 0 1px 0 rgba(255,255,255,.06);
          text-align:center;
          position:relative;
          overflow:hidden;
          isolation:isolate;
          transition:border-color .35s ease, box-shadow .35s ease, transform .35s ease;
        }

        .bottomCtaCard::before,
        .bottomCtaCard::after{
          content:"";
          position:absolute;
          inset:0;
          pointer-events:none;
          transition:opacity .35s ease, transform .35s ease;
        }

        .bottomCtaCard::before{
          inset:-60% 24% 40% -30%;
          background:linear-gradient(120deg, rgba(188,214,255,.32) 0%, rgba(188,214,255,0) 65%);
          opacity:.28;
          transform:rotate(-7deg);
          mix-blend-mode:screen;
          filter:blur(16px);
        }

        .bottomCtaCard::after{
          inset:54% -32% -120% 28%;
          background:
            linear-gradient(212deg, rgba(82,140,200,.18) 0%, rgba(10,22,42,0) 68%),
            radial-gradient(120% 140% at 80% -20%, rgba(255,255,255,.16) 0%, rgba(255,255,255,0) 58%);
          opacity:.2;
          transform:rotate(3deg);
          filter:blur(12px);
        }

        .bottomCtaCard > *{
          position:relative;
          z-index:1;
        }

        .bottomCtaCard:is(:hover,:focus-visible){
          border-color:rgba(180,210,240,.34);
          box-shadow:0 32px 92px rgba(10,26,47,.68), inset 0 1px 0 rgba(255,255,255,.22);
          transform:translate3d(0,-6px,0);
        }

        .bottomCtaContent{
          display:grid;
          gap:clamp(14px,2.4vh,22px);
          width:100%;
          max-width:min(840px,100%);
          margin:0 auto;
          justify-items:center;
        }

        .bottomCtaTitle{
          margin:0;
          color:#f8fafc;
          text-wrap:balance;
        }

        .bottomCtaCopy{
          color:#ffffff;
          font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
          font-size: clamp(17px, 2.6vw, 22px);
          line-height: 1.65;
        }

        .bottomCtaActions{
          display:flex;
          justify-content:center;
          width:100%;
        }

        @media (prefers-reduced-motion: reduce){
          .bottomCtaCard,
          .bottomCtaCard::before,
          .bottomCtaCard::after{
            transition:none !important;
          }
          .bottomCtaCard:is(:hover,:focus-visible){
            transform:none;
          }
        }
      </style>
    </section>
    {% endif %}

  </article>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const holder = document.querySelector('.waves');
  if (!holder) return;

  if (!window.ShaderProgram) {
    class ShaderProgram {

      constructor( holder, options = {} ) {

        options = Object.assign( {
          antialias: false,
          depthTest: false,
          mousemove: false,
          autosize: true,
          msaa: 0,
          vertex: `
            precision highp float;

            attribute vec4 a_position;
            attribute vec4 a_color;

            uniform float u_time;
            uniform vec2 u_resolution;
            uniform vec2 u_mousemove;
            uniform mat4 u_projection;

            varying vec4 v_color;

            void main() {

              gl_Position = u_projection * a_position;
              gl_PointSize = (10.0 / gl_Position.w) * 100.0;

              v_color = a_color;

            }`,
          fragment: `
            precision highp float;

            uniform sampler2D u_texture;
            uniform int u_hasTexture;

            varying vec4 v_color;

            void main() {

              if ( u_hasTexture == 1 ) {
                gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);
              } else {
                gl_FragColor = v_color;
              }

            }`,
          uniforms: {},
          buffers: {},
          camera: {},
          texture: null,
          onUpdate: ( () => {} ),
          onResize: ( () => {} ),
        }, options )

        const uniforms = Object.assign( {
          time: { type: 'float', value: 0 },
          hasTexture: { type: 'int', value: 0 },
          resolution: { type: 'vec2', value: [ 0, 0 ] },
          mousemove: { type: 'vec2', value: [ 0, 0 ] },
          projection: { type: 'mat4', value: [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ] },
        }, options.uniforms )

        const buffers = Object.assign( {
          position: { size: 3, data: [] },
          color: { size: 4, data: [] },
        }, options.buffers )

        const camera = Object.assign( {
          fov: 60,
          near: 1,
          far: 10000,
          aspect: 1,
          z: 100,
          perspective: true,
        }, options.camera )

        const canvas = document.createElement( 'canvas' )
        const gl = canvas.getContext( 'webgl', { antialias: options.antialias } )

        if ( ! gl ) return false

        this.count = 0
        this.gl = gl
        this.canvas = canvas
        this.camera = camera
        this.holder = holder
        this.msaa = options.msaa
        this.onUpdate = options.onUpdate
        this.onResize = options.onResize
        this.data = {}

        holder.appendChild( canvas )

        this.createProgram( options.vertex, options.fragment )

        this.createBuffers( buffers )
        this.createUniforms( uniforms )

        this.updateBuffers()
        this.updateUniforms()

        this.createTexture( options.texture )

        gl.enable( gl.BLEND )
        gl.enable( gl.CULL_FACE )
        gl.blendFunc( gl.SRC_ALPHA, gl.ONE )
        gl[ options.depthTest ? 'enable' : 'disable' ]( gl.DEPTH_TEST )

        if ( options.autosize )
          window.addEventListener( 'resize', e => this.resize( e ), false )
        if ( options.mousemove )
          window.addEventListener( 'mousemove', e => this.mousemove( e ), false )

        this.resize()

        this.update = this.update.bind( this )
        this.time = { start: performance.now(), old: performance.now() }
        this.update()

      }

      mousemove( e ) {

        let x = e.pageX / this.width * 2 - 1
        let y = e.pageY / this.height * 2 - 1

        this.uniforms.mousemove = [ x, y ]

      }

      resize( e ) {

        const holder = this.holder
        const canvas = this.canvas
        const gl = this.gl

        const width = this.width = holder.offsetWidth
        const height = this.height = holder.offsetHeight
        const aspect = this.aspect = width / height
        const dpi = this.dpi = Math.max( this.msaa ? 2 : 1, devicePixelRatio )

        canvas.width = width * dpi
        canvas.height = height * dpi
        canvas.style.width = width + 'px'
        canvas.style.height = height + 'px'

        gl.viewport( 0, 0, width * dpi, height * dpi )
        gl.clearColor( 0, 0, 0, 0 )

        this.uniforms.resolution = [ width, height ]
        this.uniforms.projection = this.setProjection( aspect )

        this.onResize( width, height, dpi )

      }

      setProjection( aspect ) {

        const camera = this.camera

        if ( camera.perspective ) {

          camera.aspect = aspect

          const fovRad = camera.fov * ( Math.PI / 180 )
          const f = Math.tan( Math.PI * 0.5 - 0.5 * fovRad )
          const rangeInv = 1.0 / ( camera.near - camera.far )

          const matrix = [
            f / camera.aspect, 0, 0, 0,
            0, f, 0, 0,
            0, 0, (camera.near + camera.far) * rangeInv, -1,
            0, 0, camera.near * camera.far * rangeInv * 2, 0
          ]

          matrix[ 14 ] += camera.z
          matrix[ 15 ] += camera.z

          return matrix

        } else {

          return [
             2 / this.width, 0, 0, 0,
             0, -2 / this.height, 0, 0,
             0, 0, 1, 0,
            -1, 1, 0, 1,
          ]

        }

      }

      createShader( type, source ) {

        const gl = this.gl
        const shader = gl.createShader( type )

        gl.shaderSource( shader, source )
        gl.compileShader( shader )

        if ( gl.getShaderParameter (shader, gl.COMPILE_STATUS ) ) {

          return shader

        } else {

          console.log( gl.getShaderInfoLog( shader ) )
          gl.deleteShader( shader )

        }

      }

      createProgram( vertex, fragment ) {

        const gl = this.gl

        const vertexShader = this.createShader( gl.VERTEX_SHADER, vertex )
        const fragmentShader = this.createShader( gl.FRAGMENT_SHADER, fragment )

        const program = gl.createProgram()

        gl.attachShader( program, vertexShader )
        gl.attachShader( program, fragmentShader )
        gl.linkProgram( program )

        if ( gl.getProgramParameter( program, gl.LINK_STATUS ) ) {

          gl.useProgram( program )
          this.program = program

        } else {

          console.log( gl.getProgramInfoLog( program ) )
          gl.deleteProgram( program )

        }

      }

      createUniforms( data ) {

        const gl = this.gl
        const uniforms = this.data.uniforms = data
        const values = this.uniforms = {}

        Object.keys( uniforms ).forEach( name => {

          const uniform = uniforms[ name ]

          uniform.location = gl.getUniformLocation( this.program, 'u_' + name )

          Object.defineProperty( values, name, {
            set: value => {

              uniforms[ name ].value = value
              this.setUniform( name, value )

            },
            get: () => uniforms[ name ].value
          } )

        } )

      }

      setUniform( name, value ) {

        const gl = this.gl
        const uniform = this.data.uniforms[ name ]

        uniform.value = value

        switch ( uniform.type ) {
          case 'int': {
            gl.uniform1i( uniform.location, value )
            break
          }
          case 'float': {
            gl.uniform1f( uniform.location, value )
            break
          }
          case 'vec2': {
            gl.uniform2f( uniform.location, ...value )
            break
          }
          case 'vec3': {
            gl.uniform3f( uniform.location, ...value )
            break
          }
          case 'vec4': {
            gl.uniform4f( uniform.location, ...value )
            break
          }
          case 'mat2': {
            gl.uniformMatrix2fv( uniform.location, false, value )
            break
          }
          case 'mat3': {
            gl.uniformMatrix3fv( uniform.location, false, value )
            break
          }
          case 'mat4': {
            gl.uniformMatrix4fv( uniform.location, false, value )
            break
          }
        }

      }

      updateUniforms() {

        const uniforms = this.data.uniforms

        Object.keys( uniforms ).forEach( name => {

          const uniform = uniforms[ name ]

          this.uniforms[ name ] = uniform.value

        } )

      }

      createBuffers( data ) {

        const buffers = this.data.buffers = data
        const values = this.buffers = {}

        Object.keys( buffers ).forEach( name => {

          const buffer = buffers[ name ]

          buffer.buffer = this.createBuffer( 'a_' + name, buffer.size )

          Object.defineProperty( values, name, {
            set: data => {

              buffers[ name ].data = data
              this.setBuffer( name, data )

              if ( name == 'position' )
                this.count = buffers.position.data.length / 3

            },
            get: () => buffers[ name ].data
          } )

        } )

      }

      createBuffer( name, size ) {

        const gl = this.gl
        const program = this.program

        const index = gl.getAttribLocation( program, name )
        const buffer = gl.createBuffer()

        gl.bindBuffer( gl.ARRAY_BUFFER, buffer )
        gl.enableVertexAttribArray( index )
        gl.vertexAttribPointer( index, size, gl.FLOAT, false, 0, 0 )

        return buffer

      }

      setBuffer( name, data ) {

        const gl = this.gl
        const buffers = this.data.buffers

        if ( name == null && ! gl.bindBuffer( gl.ARRAY_BUFFER, null ) ) return

        gl.bindBuffer( gl.ARRAY_BUFFER, buffers[ name ].buffer )
        gl.bufferData( gl.ARRAY_BUFFER, new Float32Array( data ), gl.STATIC_DRAW )

      }

      updateBuffers() {

        Object.keys( this.data.buffers ).forEach( name => {
          const data = this.data.buffers[ name ].data
          if ( data && data.length ) {
            this.setBuffer( name, data )
          }
        } )

        this.setBuffer( null )

      }

      createTexture( src ) {

        const gl = this.gl
        const texture = gl.createTexture()

        gl.bindTexture( gl.TEXTURE_2D, texture )
        gl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array( [ 0, 0, 0, 0 ] ) )

        this.texture = texture

        if ( src ) {

          this.uniforms.hasTexture = 1
          this.loadTexture( src )

        }

      }

      loadTexture( src ) {

        const gl = this.gl
        const texture = this.texture

        const textureImage = new Image()

        textureImage.onload = () => {

          gl.bindTexture( gl.TEXTURE_2D, texture )

          gl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureImage )

          gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR )
          gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR )

          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)
          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)

        }

        textureImage.src = src

      }

      update() {

        const gl = this.gl

        const now = performance.now()
        const elapsed = ( now - this.time.start ) / 5000
        const delta = now - this.time.old
        this.time.old = now

        this.uniforms.time = elapsed

        if ( this.count > 0 ) {
          gl.clear( gl.COLOR_BUFFER_BIT )
          gl.drawArrays( gl.POINTS, 0, this.count )
        }

        this.onUpdate( delta )

        requestAnimationFrame( this.update )

      }

    }

    window.ShaderProgram = ShaderProgram
  }

  const pointSize = 4

  new window.ShaderProgram( holder, {
    texture: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAb1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8v0wLRAAAAJHRSTlMAC/goGvDhmwcExrVjWzrm29TRqqSKenRXVklANSIUE8mRkGpv+HOfAAABCElEQVQ4y4VT13LDMAwLrUHteO+R9f/fWMfO6dLaPeKVEECRxOULWsEGpS9nULDwia2Y+ALqUNbAWeg775zv+sA4/FFRMxt8U2FZFCVWjR/YrH4/H9sarclSKdPMWKzb8VsEeHB3m0shkhVCyNzeXeAQ9Xl4opEieX2QCGnwGbj6GMyjw9t1K0fK9YZunPXeAGsfJtYjwzxaBnozGGorYz0ypK2HzQSYx1y8DgSRo2ewOiyh2QWOEk1Y9OrQV0a8TiBM1a8eMHWYnRMy7CZ4t1CmyRkhSUvP3gRXyHOCLBxNoC3IJv//ZrJ/kxxUHPUB+6jJZZHrpg6GOjnqaOmzp4NDR48OLxn/H27SRQ08S0ZJAAAAAElFTkSuQmCC',
    uniforms: {
      size: { type: 'float', value: pointSize },
      field: { type: 'vec3', value: [ 0, 0, 0 ] },
      speed: { type: 'float', value: 2.4 },
    },
    vertex: `
      #define M_PI 3.1415926535897932384626433832795

      precision highp float;

      attribute vec4 a_position;
      attribute vec4 a_color;

      uniform float u_time;
      uniform float u_size;
      uniform float u_speed;
      uniform vec3 u_field;
      uniform mat4 u_projection;

      varying vec4 v_color;

      void main() {

        vec3 pos = a_position.xyz;

        pos.y += (
          cos(pos.x / u_field.x * M_PI * 8.0 + u_time * u_speed) +
          sin(pos.z / u_field.z * M_PI * 8.0 + u_time * u_speed)
        ) * u_field.y;

        gl_Position = u_projection * vec4( pos.xyz, a_position.w );
        gl_PointSize = ( u_size / gl_Position.w ) * 100.0;

        v_color = a_color;

      }`,
    fragment: `
      precision highp float;

      uniform sampler2D u_texture;

      varying vec4 v_color;

      void main() {

        gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);

      }`,
    onResize( w, h, dpi ) {

      const position = [], color = []

      const width = 400 * ( w / h )
      const depth = 400
      const height = 3
      const distance = 5

      for ( let x = 0; x < width; x += distance ) {
        for ( let z = 0; z < depth; z+= distance ) {

          position.push( - width / 2 + x, -30, -depth / 2 + z )
          color.push( 0, 1 - ( x / width ) * 1, 0.5 + x / width * 0.5, z / depth )

        }
      }

      this.uniforms.field = [ width, height, depth ]

      this.buffers.position = position
      this.buffers.color = color

      this.uniforms.size = ( h / 400) * pointSize * dpi

    },
  })
})
</script>

{% include "partials/footer.html" %}
{% endblock %}
